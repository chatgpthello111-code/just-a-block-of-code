(function() {
  var d = document.createElement('div');
  d.style.position = 'fixed';
  d.style.top = '100px';
  d.style.left = '100px';
  d.style.width = '140px';
  d.style.background = '#000';
  d.style.color = '#fff';
  d.style.padding = '8px';
  d.style.borderRadius = '7px';
  d.style.boxShadow = '0 2px 7px #000a';
  d.style.zIndex = 9999;
  d.style.cursor = 'move';
  d.style.userSelect = 'none';
  d.style.transition = 'width 0.2s';

  var btn = document.createElement('button');
  btn.textContent = 'Expand';
  btn.style.background = '#222';
  btn.style.color = '#fff';
  btn.style.border = 'none';
  btn.style.padding = '6px 20px';
  btn.style.borderRadius = '5px';
  btn.style.cursor = 'pointer';
  btn.style.fontSize = '15px';
  btn.style.width = '100%';

  var content = document.createElement('div');
  content.style.display = 'none';
  content.style.marginTop = '10px';
  content.style.color = '#fff';
  content.textContent = 'Expanded content!';

  d.appendChild(btn);
  d.appendChild(content);
  document.body.appendChild(d);

  // Draggable logic
  var isDragging = false, offsetX, offsetY;
  d.addEventListener('mousedown', function(e) {
    if (e.target === btn) return;
    isDragging = true;
    offsetX = e.clientX - d.offsetLeft;
    offsetY = e.clientY - d.offsetTop;
    d.style.transition = 'none';
  });
  document.addEventListener('mousemove', function(e) {
    if (isDragging) {
      d.style.left = (e.clientX - offsetX) + 'px';
      d.style.top = (e.clientY - offsetY) + 'px';
    }
  });
  document.addEventListener('mouseup', function() {
    isDragging = false;
    d.style.transition = 'width 0.2s';
  });

  // Expand/collapse logic
  var expanded = false;
  btn.addEventListener('click', function() {
    expanded = !expanded;
    content.style.display = expanded ? 'block' : 'none';
    btn.textContent = expanded ? 'Collapse' : 'Expand';
    d.style.width = expanded ? '220px' : '140px';
  });
})();
